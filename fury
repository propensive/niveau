#!/bin/sh
:<< "##"

         · • ·
      • ○ ○ ● ● •      ╭────╮
     ○ ○ ◌ ◌ ◌ ● ●     │ ╭──╯╭─╮╭─╮╭─╮─╮╭─╮╭─╮
    • ○ ◌ ◌ ◎ ◎ ● •    │ ┌─╯ │ ╰╯ ││ ╭─╯│ ╰╯ │
     ○ ◌ ◎ ◎ ● ● ●     ╰─╯   ╰────╯╰─╯  ╰──┐ │
      • ◎ ◎ ● ● •                       ╰────╯
         · • ·

    This is Fury file which describes how to build something. It can be
    started by running fury in this directory, or just executing this
    file from a shell.

universe hell

command default rudiments/core

overlay anticipation https://github.com/propensive/anticipation
  commit 36a5154b3f6079537f4aa5419814ef4f1c712e38

project rudiments
  module core
    include  anticipation/file
    source   src/core

##

msg() { printf "\e[48;5;240m\e[38;5;248m launcher \e[38;5;240m\e[48;5;236m\e[0m\e[38;5;236m\e[0m %s\n" "$@"; }

[ -f "$HOME/.cache/fury/tmp/fury" ] || (msg "Downloading Fury from get.fury.build" && \
  mkdir -p "$HOME/.cache/fury/tmp" && \
  (wget -qO - "get.fury.build" || curl -sL "get.fury.build") > "$HOME/.cache/fury/tmp/fury" && \
  chmod +x "$HOME/.cache/fury/tmp/fury" || exit 1) 2> /dev/null

msg "Checking integrity of fury binary" && \
  [ $(md5 -q "$HOME/.cache/fury/tmp/fury" 2> /dev/null || (md5sum "$HOME/.cache/fury/tmp/fury" | head -c32) 2> /dev/null) = 35667dbf696a1c37ab52d50d1f753d2b ] || exit 1

msg "Launching fury..." && \
  "$HOME/.cache/fury/tmp/fury" -f "$0"
